$.fn.imagesLoaded=function(){var b=this.find('img[src!=""]');if(!b.length){return $.Deferred().resolve().promise()}var a=[];b.each(function(){var c=$.Deferred();a.push(c);var d=new Image();d.onload=function(){c.resolve()};d.onerror=function(){c.resolve()};d.src=this.src});return $.when.apply($,a)};$(function(){var e=4;var f=30;var g="auto";var a="auto";var b="100%";var c=0;if($("#desktopTest").is(":hidden")){$("#brand").text("RDT");e=3;$(".grid").css("padding","5px");f=5;var d=($(window).width()-(f*2)-15)/e;g=d;a="100%";b="auto"}var d=($(window).width()-(f*2)-15)/e;$.ajax({url:"./api/gallery_init.php",data:{key:0,index:0},method:"GET",success:function(j){for(var h=0;h<j.length;h++){c=h*0.05;$('<div class="grid-item" style = "animation-delay:'+c+"s;transform:scale(0);height:"+g+'px;overflow:hidden;"><img src="images/gallery/'+j[h]+'" style="max-height: 100%; height:'+a+";width:"+b+';"></div>').appendTo(".grid")}$(".grid-item").css("width",d+"px");$(".grid").imagesLoaded().then(function(){$(".grid-item").on("click",function(){$("#imagepreview").attr("src",$(this).find("img").attr("src"));$("#imagemodal").modal("show")});$(".grid").masonry({itemSelector:".grid-item",columnWidth:d,gutter:5})})},dataType:"json"})});