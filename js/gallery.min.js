$.fn.imagesLoaded=function(){var t=this.find('img[src!=""]');if(!t.length)return $.Deferred().resolve().promise();var e=[];return t.each(function(){var t=$.Deferred();e.push(t);var i=new Image;i.onload=function(){t.resolve()},i.onerror=function(){t.resolve()},i.src=this.src}),$.when.apply($,e)},$(function(){var t=0;$.ajax({url:"./api/gallery_init.php",data:{key:0,index:0},method:"GET",success:function(e){for(var i=0;i<e.length;i++)t=.05*i,$('<div class="grid-item" style = "animation-delay:'+t+'s;transform:scale(0);"><img src="images/gallery/'+e[i]+'" style="max-height: 100%; max-width: 100%;"></div>').appendTo(".grid");var n=($(window).width()-75)/4;$(".grid-item").css("width",n+"px"),$(".grid").imagesLoaded().then(function(){$(".grid-item").on("click",function(){$("#imagepreview").attr("src",$(this).find("img").attr("src")),$("#imagemodal").modal("show")}),$(".grid").masonry({itemSelector:".grid-item",columnWidth:n,gutter:5})})},dataType:"json"}),$("#desktopTest").is(":hidden")&&$("#brand").text("RDT")});